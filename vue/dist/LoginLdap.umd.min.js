(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["LoginLdap"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["LoginLdap"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/LoginLdap/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"TestableField",(function(){return m})),n.d(t,"Admin",(function(){return $})),n.d(t,"AdminPage",(function(){return J})),"undefined"!==typeof window){var a=window.document.currentScript,l=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(n.p=l[1])}var r=n("8bbf"),o=n("19dc"),i={class:"loginLdapTestableField"},c=["innerHTML"];function u(e,t,n,a,l,o){var u=Object(r["resolveComponent"])("Field"),d=Object(r["resolveComponent"])("SaveButton");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",i,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(u,{uicontrol:"text",onKeydown:t[0]||(t[0]=function(t){return e.onKeydown(t)}),"model-value":e.actualInputValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){e.actualInputValue=t,e.testResult=e.testError=null,e.$emit("update:modelValue",t)}),name:e.name,title:e.title,"inline-help":e.inlineHelp},null,8,["model-value","name","title","inline-help"])]),Object(r["withDirectives"])(Object(r["createVNode"])(d,{saving:e.isChecking,onConfirm:t[2]||(t[2]=function(t){return e.testInputValue()}),value:e.translate("LoginLdap_Test")},null,8,["saving","value"]),[[r["vShow"],e.actualInputValue]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",{class:"test-config-option-success",innerHTML:e.$sanitize(e.successMessage)},null,8,c),[[r["vShow"],null!==e.testResult]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",{class:"test-config-option-error"},Object(r["toDisplayString"])(e.testError),513),[[r["vShow"],e.testError]])])}var d=n("a5a2");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=Object(r["defineComponent"])({props:{modelValue:String,name:String,successTranslation:{type:String,required:!0},testApiMethod:{type:String,required:!0},testApiMethodArg:{type:String,required:!0},inlineHelp:String,title:String},components:{Field:d["Field"],SaveButton:d["SaveButton"]},emits:["update:modelValue"],setup:function(e){var t=null,n=function(n){return t&&(t.abort(),t=null),t=new AbortController,o["AjaxHelper"].fetch(s({method:e.testApiMethod},e.testApiMethodArg,n),{abortController:t,createErrorNotification:!1}).finally((function(){t=null}))};return{sendRequestToTestValue:n}},data:function(){return{actualInputValue:this.modelValue,testError:null,testResult:null,testValue:null,isChecking:!1}},methods:{testInputValue:function(){var e=this;this.testError=null,this.testResult=null,this.actualInputValue&&this.sendRequestToTestValue(this.actualInputValue).then((function(t){e.testResult=null===t.value?null:parseInt(t.value,10)})).catch((function(t){e.testError=t.message||t,e.testResult=null}))},onKeydown:function(e){"Enter"===e.key&&this.testInputValue()}},computed:{successMessage:function(){if(null===this.testResult)return"";var e=1===this.testResult?Object(o["translate"])("LoginLdap_OneUser"):Object(o["translate"])("General_NUsers","".concat(this.testResult));return Object(o["translate"])(this.successTranslation,"<strong>".concat(e,"</strong>"))}}});p.render=u;var m=p,f=(Object(o["createAngularJsAdapter"])({component:m,scope:{value:{angularJsBind:"@"},name:{angularJsBind:"@"},successTranslation:{angularJsBind:"@"},testApiMethod:{angularJsBind:"="},testApiMethodArg:{angularJsBind:"="},inlineHelp:{angularJsBind:"@"},title:{angularJsBind:"@"}},directiveName:"piwikLoginLdapTestableField",$inject:["$timeout"],events:{"update:modelValue":function(e,t,n,a,l,r,o){var i=r?r.$viewValue:n.value;e!==i&&o((function(){r?(r.$setViewValue(e),r.$render()):n.value=e}))}},postCreate:function(e,t,n,a,l){var i=l;i?(i.$render=function(){Object(r["nextTick"])((function(){e.modelValue=Object(o["removeAngularJsSpecificProperties"])(i.$viewValue)}))},"undefined"!==typeof t.value?i.$setViewValue(t.value):i.$setViewValue(e.modelValue)):t.$watch("value",(function(t){t!==e.modelValue&&Object(r["nextTick"])((function(){e.modelValue=t}))}))}}),{key:0}),b=Object(r["createElementVNode"])("hr",null,null,-1),_=Object(r["createElementVNode"])("hr",null,null,-1),g=["innerHTML"],L=Object(r["createElementVNode"])("br",null,null,-1),V=Object(r["createElementVNode"])("br",null,null,-1),j=Object(r["createElementVNode"])("br",null,null,-1),O=Object(r["createElementVNode"])("br",null,null,-1),h=["innerHTML"],v=["innerHTML"],N=["innerHTML"],C=Object(r["createElementVNode"])("hr",null,null,-1),y={src:"plugins/Morpheus/images/loading-blue.gif"},S=Object(r["createElementVNode"])("br",null,null,-1),w=Object(r["createElementVNode"])("br",null,null,-1),E=["innerHTML"],A={key:1},U=Object(r["createElementVNode"])("br",null,null,-1),x=["innerHTML"],D=Object(r["createElementVNode"])("hr",null,null,-1);
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function F(e,t,n,a,l,o){var i=Object(r["resolveComponent"])("Notification"),c=Object(r["resolveComponent"])("Field"),u=Object(r["resolveComponent"])("TestableField"),d=Object(r["resolveComponent"])("SaveButton"),s=Object(r["resolveComponent"])("ContentBlock"),p=Object(r["resolveComponent"])("AjaxForm");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(p,{"submit-api-method":"LoginLdap.saveLdapConfig","use-custom-data-binding":!0,"send-json-payload":!0,"form-data":e.actualLdapConfig},{default:Object(r["withCtx"])((function(n){return[Object(r["createVNode"])(s,{id:"ldapSettings","content-title":e.translate("LoginLdap_Settings")},{default:Object(r["withCtx"])((function(){return[e.updatedFromPre30?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",f,[Object(r["createVNode"])(i,{id:"pre300AlwaysUseLdapWarning",context:"warning",noclear:!0},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("General_Note")),1),Object(r["createTextVNode"])(": "+Object(r["toDisplayString"])(e.translate("LoginLdap_UpdateFromPre300Warning")),1)]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"synchronize_users_after_login",modelValue:e.actualLdapConfig.use_ldap_for_authentication,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.actualLdapConfig.use_ldap_for_authentication=t}),title:e.translate("LoginLdap_UseLdapForAuthentication"),"inline-help":e.useLdapForAuthHelp},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"use_webserver_auth",modelValue:e.actualLdapConfig.use_webserver_auth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.actualLdapConfig.use_webserver_auth=t}),title:e.translate("LoginLdap_Kerberos"),"inline-help":e.translate("LoginLdap_KerberosDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"strip_domain_from_web_auth",modelValue:e.actualLdapConfig.strip_domain_from_web_auth,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.actualLdapConfig.strip_domain_from_web_auth=t}),title:e.translate("LoginLdap_StripDomainFromWebAuth"),"inline-help":e.translate("LoginLdap_StripDomainFromWebAuthDescription")},null,8,["modelValue","title","inline-help"])])],512),[[r["vShow"],e.actualLdapConfig.use_webserver_auth]]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_network_timeout",modelValue:e.actualLdapConfig.ldap_network_timeout,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.actualLdapConfig.ldap_network_timeout=t}),title:e.translate("LoginLdap_NetworkTimeout"),"inline-help":e.ldapNetworkTimeoutHelp},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"required_member_of_field",modelValue:e.actualLdapConfig.required_member_of_field,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.actualLdapConfig.required_member_of_field=t}),title:e.translate("LoginLdap_MemberOfField"),"inline-help":e.translate("LoginLdap_MemberOfFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(u,{uicontrol:"text",modelValue:e.actualLdapConfig.required_member_of,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.actualLdapConfig.required_member_of=t}),name:"required_member_of","test-api-method":"LoginLdap.getCountOfUsersMemberOf","test-api-method-arg":"memberOf","success-translation":"LoginLdap_MemberOfCount",title:e.translate("LoginLdap_MemberOf"),"inline-help":e.memberOfCountHelp},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(u,{uicontrol:"text",modelValue:e.actualLdapConfig.ldap_user_filter,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.actualLdapConfig.ldap_user_filter=t}),name:"ldap_user_filter","test-api-method":"LoginLdap.getCountOfUsersMatchingFilter","test-api-method-arg":"filter","success-translation":"LoginLdap_FilterCount",title:e.translate("LoginLdap_Filter"),"inline-help":e.translate("LoginLdap_FilterDescription")},null,8,["modelValue","title","inline-help"])]),b,Object(r["createVNode"])(d,{saving:n.isSubmitting,onConfirm:function(e){return n.submitForm()}},null,8,["saving","onConfirm"])]})),_:2},1032,["content-title"]),Object(r["createVNode"])(s,{id:"ldapUserMappingSettings","content-title":e.translate("LoginLdap_UserSyncSettings")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_user_id_field",modelValue:e.actualLdapConfig.ldap_user_id_field,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.actualLdapConfig.ldap_user_id_field=t}),title:e.translate("LoginLdap_UserIdField"),"inline-help":e.translate("LoginLdap_UserIdFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_password_field",modelValue:e.actualLdapConfig.ldap_password_field,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.actualLdapConfig.ldap_password_field=t}),title:e.translate("LoginLdap_PasswordField"),"inline-help":e.ldapPasswordFieldHelp},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_mail_field",modelValue:e.actualLdapConfig.ldap_mail_field,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.actualLdapConfig.ldap_mail_field=t}),title:e.translate("LoginLdap_MailField"),"inline-help":e.translate("LoginLdap_MailFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"user_email_suffix",modelValue:e.actualLdapConfig.user_email_suffix,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.actualLdapConfig.user_email_suffix=t}),title:e.translate("LoginLdap_UsernameSuffix"),"inline-help":e.translate("LoginLdap_UsernameSuffixDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"new_user_default_sites_view_access",modelValue:e.actualLdapConfig.new_user_default_sites_view_access,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.actualLdapConfig.new_user_default_sites_view_access=t}),title:e.translate("LoginLdap_NewUserDefaultSitesViewAccess"),"inline-help":e.translate("LoginLdap_NewUserDefaultSitesViewAccessDescription")},null,8,["modelValue","title","inline-help"])]),_,Object(r["createVNode"])(d,{saving:n.isSubmitting,onConfirm:function(e){return n.submitForm()}},null,8,["saving","onConfirm"])]})),_:2},1032,["content-title"]),Object(r["createVNode"])(s,{id:"ldapUserAccessMappingSettings","content-title":e.translate("LoginLdap_AccessSyncSettings")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.readMoreAboutAccessSynchronization)},null,8,g),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"enable_synchronize_access_from_ldap",modelValue:e.actualLdapConfig.enable_synchronize_access_from_ldap,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.actualLdapConfig.enable_synchronize_access_from_ldap=t}),title:e.translate("LoginLdap_EnableLdapAccessSynchronization"),"inline-help":e.translate("LoginLdap_EnableLdapAccessSynchronizationDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(i,{context:"info",noclear:!0},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("LoginLdap_ExpectedLdapAttributes")),1),L,V,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("LoginLdap_ExpectedLdapAttributesPrelude"))+":",1),j,O,Object(r["createElementVNode"])("ul",null,[Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.sampleViewAttribute)},null,8,h),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.sampleAdminAttribute)},null,8,v),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.sampleSuperuserAttribute)},null,8,N)])]})),_:1})]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_view_access_field",modelValue:e.actualLdapConfig.ldap_view_access_field,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.actualLdapConfig.ldap_view_access_field=t}),title:e.translate("LoginLdap_LdapViewAccessField"),"inline-help":e.translate("LoginLdap_LdapViewAccessFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_admin_access_field",modelValue:e.actualLdapConfig.ldap_admin_access_field,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.actualLdapConfig.ldap_admin_access_field=t}),title:e.translate("LoginLdap_LdapAdminAccessField"),"inline-help":e.translate("LoginLdap_LdapAdminAccessFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"ldap_superuser_access_field",modelValue:e.actualLdapConfig.ldap_superuser_access_field,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.actualLdapConfig.ldap_superuser_access_field=t}),title:e.translate("LoginLdap_LdapSuperUserAccessField"),"inline-help":e.translate("LoginLdap_LdapSuperUserAccessFieldDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"user_access_attribute_server_specification_delimiter",modelValue:e.actualLdapConfig.user_access_attribute_server_specification_delimiter,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.actualLdapConfig.user_access_attribute_server_specification_delimiter=t}),title:e.translate("LoginLdap_LdapUserAccessAttributeServerSpecDelimiter"),"inline-help":e.translate("LoginLdap_LdapUserAccessAttributeServerSpecDelimiterDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"user_access_attribute_server_separator",modelValue:e.actualLdapConfig.user_access_attribute_server_separator,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.actualLdapConfig.user_access_attribute_server_separator=t}),title:e.translate("LoginLdap_LdapUserAccessAttributeServerSeparator"),"inline-help":e.translate("LoginLdap_LdapUserAccessAttributeServerSeparatorDescription")},null,8,["modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"instance_name",modelValue:e.actualLdapConfig.instance_name,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.actualLdapConfig.instance_name=t}),title:e.translate("LoginLdap_ThisMatomoInstanceName"),"inline-help":e.translate("LoginLdap_ThisMatomoInstanceNameDescription")},null,8,["modelValue","title","inline-help"])]),C,Object(r["createVNode"])(d,{saving:n.isSubmitting,onConfirm:function(e){return n.submitForm()}},null,8,["saving","onConfirm"])],512),[[r["vShow"],e.actualLdapConfig.enable_synchronize_access_from_ldap]])]})),_:2},1032,["content-title"])]})),_:1},8,["form-data"])]),Object(r["createVNode"])(s,{id:"ldapManualSynchronizeUser","content-title":e.translate("LoginLdap_LoadUser")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("LoginLdap_LoadUserDescription")),1),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",placeholder:"Enter a username...",modelValue:e.userToSynchronize,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.userToSynchronize=t})},null,8,["modelValue"])]),Object(r["createVNode"])(d,{onConfirm:t[20]||(t[20]=function(t){return e.synchronizeUser(e.userToSynchronize)}),value:e.translate("LoginLdap_Go"),style:{"margin-right":"7px"}},null,8,["value"]),Object(r["withDirectives"])(Object(r["createElementVNode"])("img",y,null,512),[[r["vShow"],e.isSynchronizing]]),S,w,Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[e.synchronizeUserError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,innerHTML:e.$sanitize(e.synchronizeUserError)},null,8,E)):Object(r["createCommentVNode"])("",!0),e.synchronizeUserDone?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",A,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("General_Done"))+"!",1)])):Object(r["createCommentVNode"])("",!0),U],512),[[r["vShow"],e.synchronizeUserError||e.synchronizeUserDone]]),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.loadUserCommandDesc)},null,8,x)]})),_:1},8,["content-title"]),Object(r["createVNode"])(s,{"content-title":e.translate("LoginLdap_LDAPServers")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(p,{"submit-api-method":"LoginLdap.saveServersInfo","send-json-payload":!0,"use-custom-data-binding":!0,"form-data":e.actualServers},{default:Object(r["withCtx"])((function(n){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.actualServers,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{id:"ldapServersTable",key:n},[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",modelValue:t.name,"onUpdate:modelValue":function(e){return t.name=e},title:e.translate("LoginLdap_ServerName")},null,8,["modelValue","onUpdate:modelValue","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",modelValue:t.hostname,"onUpdate:modelValue":function(e){return t.hostname=e},placeholder:"localhost",title:e.translate("LoginLdap_ServerUrl")},null,8,["modelValue","onUpdate:modelValue","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",modelValue:t.port,"onUpdate:modelValue":function(e){return t.port=e},placeholder:"389",title:e.translate("LoginLdap_LdapPort"),"inline-help":e.translate("LoginLdap_LdapUrlPortWarning")},null,8,["modelValue","onUpdate:modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",modelValue:t.start_tls,"onUpdate:modelValue":function(e){return t.start_tls=e},title:e.translate("LoginLdap_StartTLS"),"inline-help":e.translate("LoginLdap_StartTLSFieldHelp")},null,8,["modelValue","onUpdate:modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",placeholder:"dc=example,dc=site,dc=org",modelValue:t.base_dn,"onUpdate:modelValue":function(e){return t.base_dn=e},title:e.translate("LoginLdap_BaseDn")},null,8,["modelValue","onUpdate:modelValue","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",placeholder:"cn=admin,dc=example,dc=site,dc=org",modelValue:t.admin_user,"onUpdate:modelValue":function(e){return t.admin_user=e},title:e.translate("LoginLdap_AdminUser"),"inline-help":e.translate("LoginLdap_AdminUserDescription")},null,8,["modelValue","onUpdate:modelValue","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{modelValue:t.admin_pass,"onUpdate:modelValue":function(e){return t.admin_pass=e},uicontrol:"password",title:e.translate("LoginLdap_AdminPass"),"inline-help":e.translate("LoginLdap_PasswordFieldHelp")},null,8,["modelValue","onUpdate:modelValue","title","inline-help"])]),Object(r["createVNode"])(d,{onConfirm:function(t){return e.actualServers.splice(n,1)},value:e.translate("General_Delete")},null,8,["onConfirm","value"])])})),128)),D,Object(r["createVNode"])(d,{onConfirm:t[21]||(t[21]=function(t){return e.addServer()}),value:e.translate("General_Add"),style:{"margin-right":"3.5px"}},null,8,["value"]),Object(r["createVNode"])(d,{saving:n.isSubmitting,onConfirm:function(e){return n.submitForm()}},null,8,["saving","onConfirm"])]})),_:1},8,["form-data"])])]})),_:1},8,["content-title"])])}function T(e){return B(e)||z(e)||M(e)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){if(e){if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function z(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function B(e){if(Array.isArray(e))return H(e)}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function P(e,t,n,a){var l="".concat(t,": ");return e.instance_name?l+=e.instance_name:l+=window.location.hostname,n&&(l+="".concat(e.user_access_attribute_server_separator).concat(n)),l+=e.user_access_attribute_server_specification_delimiter,e.instance_name?l+="piwikB":l+="anotherhost.com",a&&(l+="".concat(e.user_access_attribute_server_separator).concat(a)),l}var q=Object(r["defineComponent"])({props:{ldapConfig:{type:Object,required:!0},servers:{type:Array,required:!0},updatedFromPre30:Boolean},components:{AjaxForm:o["AjaxForm"],ContentBlock:o["ContentBlock"],Notification:o["Notification"],Field:d["Field"],TestableField:m,SaveButton:d["SaveButton"]},data:function(){return{actualLdapConfig:Object.assign({},this.ldapConfig),userToSynchronize:"",actualServers:T(this.servers),synchronizeUserError:null,synchronizeUserDone:null,isSynchronizing:!1}},methods:{addServer:function(){this.actualServers.push({name:"server".concat(this.actualServers.length+1),hostname:"",port:389,base_dn:"",admin_user:"",admin_pass:""})},synchronizeUser:function(e){var t=this;this.synchronizeUserError=null,this.synchronizeUserDone=null,this.isSynchronizing=!0,o["AjaxHelper"].post({method:"LoginLdap.synchronizeUser"},{login:e},{createErrorNotification:!1}).then((function(){t.synchronizeUserDone=!0})).catch((function(e){t.synchronizeUserError=e.message||e})).finally((function(){t.isSynchronizing=!1}))}},computed:{sampleViewAttribute:function(){var e=this.actualLdapConfig;return P(e,e.ldap_view_access_field,"1,2","3,4")},sampleAdminAttribute:function(){var e=this.actualLdapConfig;return P(e,e.ldap_admin_access_field,"all","all")},sampleSuperuserAttribute:function(){var e=this.actualLdapConfig;return P(e,e.ldap_superuser_access_field)},readMoreAboutAccessSynchronization:function(){var e="https://github.com/matomo-org/plugin-LoginLdap#matomo-access-synchronization";return Object(o["translate"])("LoginLdap_ReadMoreAboutAccessSynchronization",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">'),"</a>")},loadUserCommandDesc:function(){var e="https://github.com/matomo-org/plugin-LoginLdap#commands";return Object(o["translate"])("LoginLdap_LoadUserCommandDesc",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">loginldap:synchronize-users</a>'))},useLdapForAuthHelp:function(){var e=Object(o["translate"])("LoginLdap_UseLdapForAuthenticationDescription");return"".concat(e,"<br /><br />").concat(Object(o["translate"])("LoginLdap_MobileAppIntegrationNote"))},ldapNetworkTimeoutHelp:function(){var e=Object(o["translate"])("LoginLdap_NetworkTimeoutDescription");return"".concat(e,"<br />").concat(Object(o["translate"])("LoginLdap_NetworkTimeoutDescription2"))},memberOfCountHelp:function(){var e=Object(o["translate"])("LoginLdap_MemberOfDescription");return"".concat(e,"<br />").concat(Object(o["translate"])("LoginLdap_MemberOfDescription2"))},ldapPasswordFieldHelp:function(){var e=Object(o["translate"])("LoginLdap_PasswordFieldDescription");return"".concat(e,"<br /><br />").concat(Object(o["translate"])("LoginLdap_PasswordFieldDescription2"))}}});q.render=F;var $=q;function I(e,t,n,a,l,o){var i=Object(r["resolveComponent"])("Notification"),c=Object(r["resolveComponent"])("Admin");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[e.isLoginControllerActivated?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,context:"warning",noclear:!0},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("General_Warning")),1),Object(r["createTextVNode"])(": "+Object(r["toDisplayString"])(e.translate("LoginLdap_LoginPluginEnabledWarning","Login","LoginLdap")),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(c,{servers:e.servers,"ldap-config":e.ldapConfig,"updated-from-pre30":e.updatedFromPre30},null,8,["servers","ldap-config","updated-from-pre30"])])}var R=Object(r["defineComponent"])({props:{isLoginControllerActivated:Boolean,ldapConfig:{type:Object,required:!0},servers:{type:Array,required:!0},updatedFromPre30:Boolean},components:{Notification:o["Notification"],Admin:$}});R.render=I;var J=R;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=LoginLdap.umd.min.js.map